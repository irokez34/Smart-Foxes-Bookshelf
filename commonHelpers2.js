import"./assets/modulepreload-polyfill-3cfb730f.js";const e={registrationForm:document.getElementById("registration_form"),loginForm:document.getElementById("login_form"),registrationName:document.getElementById("registration_name"),registrationEmail:document.getElementById("registration_email"),registrationPassword:document.getElementById("registration_password"),closeModalButton:document.getElementById("closeModalButton"),showRegistrationFormButton:document.getElementById("showRegistrationFormButton"),showLoginFormButton:document.getElementById("showLoginFormButton"),registerButton:document.getElementById("registerButton"),loginButton:document.getElementById("loginButton"),loginEmail:document.getElementById("login_email"),loginPassword:document.getElementById("login_password"),userDropdown:document.querySelector(".select-menu"),signUpButton:document.querySelector(".header-link-log-up"),mobileActiveAcc:document.querySelector(".mobile-active-acc"),userInfoContainer:document.getElementById("user_info"),userNameElement:document.querySelector(".user-name"),googleSignInButton:document.getElementById("googleSignInButton"),logoutButton:document.getElementById("logoutButton"),usernameDisplay:document.querySelector(".user-name"),toggleButtons:document.querySelectorAll(".toggle_buttons button")},B={apiKey:"AIzaSyAQpcHlYnmJgrkoX3KbdR3qCIHswCf3vaM",authDomain:"bookshelf-smartfoxes-team.firebaseapp.com",projectId:"bookshelf-smartfoxes-team",storageBucket:"bookshelf-smartfoxes-team.appspot.com",messagingSenderId:"615845871184",appId:"1:615845871184:web:f8e6e3da332e48b2721b55",measurementId:"G-J4EFJFQ0WD"};firebase.initializeApp(B);const r=firebase.auth(),c=firebase.database();function l(){location.href="index.html"}function g(t,n,o){e[t].style.display="flex",e[n].style.display="none",e.toggleButtons.forEach(i=>{i.classList.remove("clicked")}),e[o].classList.add("clicked")}function E(){g("registrationForm","loginForm","showRegistrationFormButton")}function p(){g("loginForm","registrationForm","showLoginFormButton")}function f(t){localStorage.setItem("user_data",JSON.stringify(t))}function w(){e.registrationForm.style.display="none"}function d(){let t=e.registrationName.value,n=e.registrationEmail.value,o=e.registrationPassword.value;if(!v(t)||!h(n)||!y(o)){alert("Registration failed. Please check your inputs.");return}r.createUserWithEmailAndPassword(n,o).then(i=>{let s=i.user,a=c.ref(),u={name:t,email:n,last_login:Date.now()};a.child("users/"+s.uid).set(u),f(u),alert("Registration successful!"),console.log("Name:",t),console.log("Email:",n),I(),l()}).catch(i=>{alert(`Registration failed: ${i.message}`)})}function m(){let t=e.loginEmail.value,n=e.loginPassword.value;if(!h(t)||!y(n)){alert("Login failed. Please check your inputs.");return}r.signInWithEmailAndPassword(t,n).then(o=>{let i=o.user,s=c.ref(),a={last_login:Date.now()};s.child("users/"+i.uid).update(a),f(a),alert("Login successful!"),console.log("Email:",t),b(i),L(),l()}).catch(o=>{alert(`Login failed: ${o.message}`)})}function h(t){return/^[^@]+@\w+(\.\w+)+\w$/.test(t)}function y(t){return t.length>=6}function v(t){return t.trim()!==""}function I(){e.registrationName.value="",e.registrationEmail.value="",e.registrationPassword.value=""}function L(){e.loginEmail.value="",e.loginPassword.value=""}function b(t){e.userInfoContainer&&e.userNameElement?(e.userInfoContainer.textContent=`Welcome, ${t.displayName||t.email}!`,e.userNameElement.textContent=t.displayName||t.email):console.error("Element with id 'user_info' or class 'user-name' not found.")}document.addEventListener("DOMContentLoaded",()=>{e.showRegistrationFormButton.addEventListener("click",E),e.showLoginFormButton.addEventListener("click",p),e.registerButton.addEventListener("click",d),e.loginButton.addEventListener("click",m),e.closeModalButton.addEventListener("click",w),e.registrationForm.addEventListener("keydown",o=>{o.key==="Enter"&&d()}),e.loginForm.addEventListener("keydown",o=>{o.key==="Enter"&&m()});function t(){const o=new firebase.auth.GoogleAuthProvider;r.signInWithPopup(o).then(i=>{i.user}).catch(i=>{console.error("Google login error:",i)})}e.googleSignInButton.addEventListener("click",t);function n(){localStorage.removeItem("user_data"),r.signOut().then(()=>{l()}).catch(o=>{console.error("Logout failed:",o)})}e.logoutButton.addEventListener("click",n)});function F(t){t&&(e.usernameDisplay.textContent=t.displayName||t.email,e.userDropdown.classList.remove("is-hidden"),e.signUpButton.style.display="none",e.mobileActiveAcc.classList.remove("is-hidden"))}firebase.auth().onAuthStateChanged(F);
//# sourceMappingURL=commonHelpers2.js.map

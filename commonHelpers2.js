import"./assets/toggle_theme-056aedf1.js";const g={apiKey:"AIzaSyAQpcHlYnmJgrkoX3KbdR3qCIHswCf3vaM",authDomain:"bookshelf-smartfoxes-team.firebaseapp.com",projectId:"bookshelf-smartfoxes-team",storageBucket:"bookshelf-smartfoxes-team.appspot.com",messagingSenderId:"615845871184",appId:"1:615845871184:web:f8e6e3da332e48b2721b55",measurementId:"G-J4EFJFQ0WD"};firebase.initializeApp(g);const a=firebase.auth(),d=firebase.database();function m(e){localStorage.setItem("user_data",JSON.stringify(e))}function f(){document.getElementById("myModal").style.display="none",document.location.href="./index.html"}function y(){document.getElementById("registration_form").style.display="flex",document.getElementById("login_form").style.display="none"}function E(){document.getElementById("registration_form").style.display="none",document.getElementById("login_form").style.display="flex"}function r(){let e=document.getElementById("registration_name").value,n=document.getElementById("registration_email").value,t=document.getElementById("registration_password").value;if(!I(e)||!c(n)||!u(t)){alert("Registration failed. Please check your inputs.");return}a.createUserWithEmailAndPassword(n,t).then(()=>{let o=a.currentUser,i=d.ref(),l={name:e,email:n,last_login:Date.now()};i.child("users/"+o.uid).set(l),m(l),alert("Registration successful!"),h(),document.location.href="./index.html"}).catch(o=>{alert(`Registration failed: ${o.message}`)})}function s(){let e=document.getElementById("login_email").value,n=document.getElementById("login_password").value;if(!c(e)||!u(n)){alert("Login failed. Please check your inputs.");return}a.signInWithEmailAndPassword(e,n).then(()=>{let t=a.currentUser,o=d.ref(),i={last_login:Date.now()};o.child("users/"+t.uid).update(i),m(i),alert("Login successful!"),B(t),p(),document.location.href="./index.html"}).catch(t=>{alert(`Login failed: ${t.message}`)})}function c(e){return/^[^@]+@\w+(\.\w+)+\w$/.test(e)}function u(e){return e.length>=6}function I(e){return e.trim()!==""}function h(){document.getElementById("registration_name").value="",document.getElementById("registration_email").value="",document.getElementById("registration_password").value=""}function p(){document.getElementById("login_email").value="",document.getElementById("login_password").value=""}function B(e){const n=document.getElementById("user_info"),t=document.querySelector(".user-name");n&&t?(n.textContent=`Welcome, ${e.displayName||e.email}!`,t.textContent=e.displayName||e.email):console.error("Element with id 'user_info' or class 'user-name' not found.")}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("closeModalButton").addEventListener("click",f),document.getElementById("showRegistrationFormButton").addEventListener("click",y),document.getElementById("showLoginFormButton").addEventListener("click",E),document.getElementById("registerButton").addEventListener("click",r),document.getElementById("loginButton").addEventListener("click",s),document.getElementById("registration_form").addEventListener("keydown",t=>{t.key==="Enter"&&r()}),document.getElementById("login_form").addEventListener("keydown",t=>{t.key==="Enter"&&s()});function e(){const t=new firebase.auth.GoogleAuthProvider;a.signInWithPopup(t).then(o=>{o.user}).catch(o=>{console.error("Помилка входу через Google:",o)})}document.getElementById("googleSignInButton").addEventListener("click",e);function n(){localStorage.removeItem("user_data"),a.signOut().then(()=>{document.location.href="/"}).catch(t=>{console.error("Logout failed:",t)})}document.getElementById("logoutButton").addEventListener("click",n)});
//# sourceMappingURL=commonHelpers2.js.map
